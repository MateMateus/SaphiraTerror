@* <!DOCTYPE html> *@
@* <html lang="pt-br" data-bs-theme="dark"> *@
@* <head> *@
@*     <meta charset="utf-8" /> *@
@*     <meta name="viewport" content="width=device-width, initial-scale=1" /> *@
@*     <title>@ViewData["Title"] - SaphiraTerror</title> *@

@*     <!-- Bootstrap 5.3 CDN --> *@
@*     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> *@

@*     <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" /> *@
@* </head> *@
@* <body> *@
@*     <header class="navbar navbar-expand-lg bg-body-tertiary fixed-top shadow-sm"> *@
@*         <div class="container"> *@
@*             <a class="navbar-brand fw-bold" href="@Url.Action("Index", "Home")">SaphiraTerror</a> *@
@*             <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain"> *@
@*                 <span class="navbar-toggler-icon"></span> *@
@*             </button> *@
@*             <nav id="navMain" class="collapse navbar-collapse"> *@
@*                 <ul class="navbar-nav ms-auto mb-2 mb-lg-0"> *@
@*                     <li class="nav-item"><a class="nav-link" href="@Url.Action("Index", "Home")">Home</a></li> *@
@*                     <li class="nav-item"><a class="nav-link" href="@Url.Action("About", "Home")">About</a></li> *@
@*                     <li class="nav-item"><a class="nav-link" href="@Url.Action("Catalog", "Home")">Catalog</a></li> *@
@*                     <li class="nav-item"><a class="nav-link" href="@Url.Action("Genre", "Home")">Genre</a></li> *@
@*                     <li class="nav-item"><a class="nav-link" href="@Url.Action("Logout", "Home")">Logout</a></li> *@
@*                 </ul> *@
@*                 <button id="themeToggle" class="btn btn-outline-secondary ms-3">Light/Dark</button> *@
@*             </nav> *@
@*         </div> *@
@*     </header> *@

@*     <main class="container" style="padding-top:88px"> *@
@*         @RenderBody() *@
@*     </main> *@

@*     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script> *@
@*     <script> *@
@*         // Toggle tema (salva preferência) — leve, para Fase 0 *@
@*         const root = document.documentElement; *@
@*         const key = 'st-theme'; *@
@*         const saved = localStorage.getItem(key); *@
@*         if (saved) document.documentElement.setAttribute('data-bs-theme', saved); *@
@*         document.getElementById('themeToggle')?.addEventListener('click', () => { *@
@*           const current = root.getAttribute('data-bs-theme') === 'dark' ? 'light' : 'dark'; *@
@*           root.setAttribute('data-bs-theme', current); *@
@*           localStorage.setItem(key, current); *@
@*         }); *@
@*     </script> *@

@*     @RenderSection("Scripts", required: false) *@
@* </body> *@
@* </html> *@




@* refatorado fase 5 *@

<!DOCTYPE html>
<html lang="pt-br" data-bs-theme="dark">
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - SaphiraTerror</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body>
    <nav class="navbar navbar-expand-lg sticky-top border-bottom" style="height:var(--nav-h)">
        <div class="container">
            <a class="navbar-brand fw-bold brand" href="/#home">SaphiraTerror</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">☰</button>
            <div id="nav" class="collapse navbar-collapse bg-dark">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="/#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#about">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#catalog">Catalog</a></li>
                    <li class="nav-item"><a class="nav-link" href="/#genres">Genre</a></li>

                    @* Links de área conforme roles (aceita variações de nome do banco) *@
                    @if (User.Identity?.IsAuthenticated ?? false)
                    {
                        bool isAdmin = User.IsInRole("ADMIN") || User.IsInRole("Admin") || User.IsInRole("Administrador");
                        bool isGerente = User.IsInRole("GERENTE") || User.IsInRole("Gerente");

                        if (isAdmin)
                        {
                            <li class="nav-item"><a class="nav-link" href="/Admin/Dashboard">Dashboard</a></li>
                        }
                        if (isAdmin || isGerente)
                        {
                            <li class="nav-item"><a class="nav-link" href="/Admin/Manage">Gestão</a></li>
                        }
                    }
                </ul>

                <div class="d-flex align-items-center gap-3">
                    <div class="form-check form-switch">
                        <input id="theme" class="form-check-input" type="checkbox" />
                        <label class="form-check-label" for="theme">Light/Dark</label>
                    </div>

                    @if (User.Identity?.IsAuthenticated ?? false)
                    {
                        <form asp-area="" asp-controller="Auth" asp-action="Logout" method="post" class="d-inline">
                            <button type="submit" class="btn btn-outline-light btn-sm">Sair (@User.Identity?.Name)</button>
                            @Html.AntiForgeryToken()
                        </form>


                    }
                    else
                    {
                        <a class="btn btn-sm btn-outline-light" href="/Auth/Login">Área restrita</a>
                    }
                </div>
            </div>
        </div>
    </nav>

    <main class="py-4">
        <div class="container">
            @RenderBody()
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>
